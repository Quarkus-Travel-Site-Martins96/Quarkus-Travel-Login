{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/login-form/login-form.component.ts","./src/app/login-form/login-form.component.html","./src/app/login-pending/login-pending.component.ts","./src/app/login-pending/login-pending.component.html","./src/app/rest-service.ts","./src/app/toolbar/default.avatar.ts","./src/app/toolbar/jwt-decode-vo.ts","./src/app/toolbar/toolbar.component.ts","./src/app/toolbar/toolbar.component.html","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { Environment } from '../environments/environment';\r\nimport { RestService } from './rest-service';\r\nimport { CookieService } from 'ngx-cookie-service';\r\nimport { HttpHeaders } from '@angular/common/http';\r\nimport { firstValueFrom, Observable } from 'rxjs';\r\n\r\n@Component({\r\n\tselector: 'app-root',\r\n\ttemplateUrl: './app.component.html',\r\n\tstyleUrls: ['./app.component.css', './app.component-effects.less']\r\n})\r\nexport class AppComponent {\r\n\t\r\n\tprivate validateUrl = Environment.getLoginHost() + '/validate';\r\n\tprivate homePageUrl = Environment.getHomeHost();\r\n    \r\n\tpublic jwt: string;\r\n\t\r\n\tconstructor(private rest: RestService, private cookies: CookieService) { \r\n\t\tthis.jwt = null;\r\n\t\tlet cookieJWT = this.cookies.get('user.jwt');\r\n\t\tif (cookieJWT) {\r\n\t\t\t\r\n\t\t\t//JWT found, check if is valid\r\n\t\t\tconst obs: Observable<any> = this.rest.sendPost<any>(this.validateUrl, cookieJWT, new HttpHeaders({\r\n\t\t\t\t'content-type': 'text/plain'\r\n\t\t\t}));\r\n\t\t\tfirstValueFrom(obs)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\t//JWT correct, move to Home Page\r\n\t\t\t\t\twindow.location.href = this.homePageUrl;\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t\t//JWT non correct or service not available\r\n\t\t\t\t\tif (error.status === 401) {\r\n\t\t\t\t\t\tconsole.error('The token JWT is not valid, relogin required', error)\r\n\t\t\t\t\t\tthis.cookies.delete('user.jwt');\r\n\t\t\t\t\t\tthis.jwt = null;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.error('The call is not end correct', error)\r\n\t\t\t\t\t\tthis.jwt = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n\t\r\n\tupdateJWT(jwt: string): void {\r\n\t\tthis.jwt = jwt;\r\n\t}\r\n\t\r\n\tpublic goToHome() {\r\n\t\twindow.location.href = this.homePageUrl;\r\n\t}\r\n\t\r\n}\r\n\r\n\r\n","<div class=\"toolbar\">\r\n\t<app-toolbar></app-toolbar>\r\n</div>\r\n<div *ngIf=\"!jwt\" class=\"content\" role=\"main\">\r\n\t<app-login-form (jwt)=\"updateJWT($event)\"></app-login-form>\r\n\t<ul class=\"bg-bubbles clear\">\r\n\t\t<li></li>\r\n\t\t<li></li>\r\n\t\t<li></li>\r\n\t\t<li></li>\r\n\t\t<li></li>\r\n\t\t<li></li>\r\n\t\t<li></li>\r\n\t\t<li></li>\r\n\t\t<li></li>\r\n\t\t<li></li>\r\n\t\t<li></li>\r\n\t\t<li></li>\r\n\t\t<li></li>\r\n\t\t<li></li>\r\n\t</ul>\r\n</div>","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { ToolbarComponent } from './toolbar/toolbar.component';\r\nimport { LoginFormComponent } from './login-form/login-form.component';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { CookieService } from 'ngx-cookie-service';\nimport { LoginPendingComponent } from './login-pending/login-pending.component';\r\n\r\n@NgModule({\r\n\tdeclarations: [\r\n\t\tAppComponent,\r\n\t\tToolbarComponent,\r\n\t\tLoginFormComponent,\r\n  LoginPendingComponent\r\n\t],\r\n\timports: [\r\n\t\tBrowserModule,\r\n\t\tHttpClientModule,\r\n\t\tFormsModule\r\n\t],\r\n\tproviders: [ CookieService ],\r\n\tbootstrap: [\r\n\t\tAppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Component, EventEmitter, Output, OnDestroy } from '@angular/core';\r\nimport { RestService } from '../rest-service';\r\nimport { Environment } from 'src/environments/environment';\r\nimport { HttpErrorResponse, HttpHeaders, HttpResponse } from '@angular/common/http';\r\nimport { CookieService } from 'ngx-cookie-service';\r\nimport { firstValueFrom, Observable, Subscription, throwError } from 'rxjs';\r\n\r\n\r\n@Component({\r\n\tselector: 'app-login-form',\r\n\ttemplateUrl: './login-form.component.html',\r\n\tstyleUrls: ['./login-form.component.css', 'login-form.background.components.less']\r\n})\r\nexport class LoginFormComponent implements OnDestroy {\r\n\t\r\n\tprivate loginUrl: string = Environment.getLoginHost() + '/login';\r\n\tprivate homePageUrl: string = Environment.getHomeHost();\r\n\r\n\tisLoading: boolean = false;\r\n\r\n\t@Output()\r\n\tjwt = new EventEmitter<string>();\r\n\r\n\tuserInput: string;\r\n\tpwdInput: string;\r\n\r\n\terrorDetails: string;\r\n\t\r\n\tdisplayError: boolean;\r\n\tdisplayCredentialError: boolean;\r\n\tdisplayPending: boolean;\r\n\r\n\tprivate loginSub: Subscription;\r\n\r\n\tconstructor(private rest: RestService, private cookies: CookieService) { }\r\n\r\n\tasync login(): Promise<void> {\r\n\t\tif (this.loginSub)\r\n\t\t\tthis.loginSub.unsubscribe();\r\n\r\n\t\tthis.resetFields();\r\n\t\tthis.isLoading = true;\r\n\t\tlet obsv: Observable<HttpResponse<string>> = this.rest.sendPostGetRawText(this.loginUrl, {\r\n\t\t\t\tusername: this.userInput,\r\n\t\t\t\tpassword: this.pwdInput\r\n\t\t\t\t}, new HttpHeaders({ 'content-type': 'application/json' })\r\n\t\t\t);\r\n\t\tawait firstValueFrom(obsv)\r\n\t\t\t.then(response => {\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t\tif (response && response.ok) {\r\n\t\t\t\t\tconsole.log('Login success');\r\n\t\t\t\t\tthis.jwt.emit(response.body);\r\n\t\t\t\t\tthis.cookies.delete('user.jwt');\r\n\r\n\t\t\t\t\tthis.cookies.set('user.jwt', response.body, 7, '/', this.getCookieDomain());\r\n\t\t\t\t\tthis.displayError = false;\r\n\t\t\t\t\twindow.location.href = this.homePageUrl;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('Error occurs');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(\r\n\t\t\t\te => this.handleError(e, this)\r\n\t\t\t);\r\n\t}\r\n\t\r\n\tngOnDestroy(): void {\r\n\t\tif(this.loginSub)\r\n\t\t\tthis.loginSub.unsubscribe();\r\n\t}\r\n\r\n\r\n\tprivate handleError(error: HttpErrorResponse, login: LoginFormComponent): Observable<never> {\r\n\t\tconsole.error(error);\r\n\t\tthis.isLoading = false;\r\n\t\tif (!error) {\r\n\t\t\tlogin.displayError = true;\r\n\t\t\tconsole.log('Backend response null ', error);\r\n\t\t\tlogin.errorDetails = 'Unable to load response, generic error';\r\n\t\t\treturn throwError(() => new Error('Unable to load response, generic error'));\r\n\t\t} else if (error.status == 0) {\r\n\t\t\tlogin.displayError = true;\r\n\t\t\tlogin.userInput = \"\";\r\n\t\t\tlogin.pwdInput = \"\";\r\n\t\t\tconsole.log('Backend response not recived ', error);\r\n\t\t\tlogin.errorDetails = error.message;\r\n\t\t} else if (error.status === 403) {\r\n\t\t\tlogin.displayCredentialError = true;\r\n\t\t\tlogin.userInput = \"\";\r\n\t\t\tlogin.pwdInput = \"\";\r\n\t\t\tconsole.log('Credential not valid ', error);\r\n\t\t} else if (error.status === 409) {\r\n\t\t\tlogin.displayPending = true;\r\n\t\t\tlogin.userInput = \"\";\r\n\t\t\tlogin.pwdInput = \"\";\r\n\t\t\tconsole.log('User is in pending ', error);\r\n\t\t} else {\r\n\t\t\tconsole.log('Error in call, status ', error);\r\n\t\t}\r\n\r\n\t\treturn throwError(() => new Error(error.message));\r\n\t}\r\n\r\n\tprivate getCookieDomain(): string {\r\n\t\tlet fullDomain: string = window.location.hostname;\r\n\t\tif (fullDomain.startsWith('localhost'))\r\n\t\t\treturn null;\r\n\r\n\r\n\t\tlet domainSplitted: string[] = fullDomain.split(\"\\.\");\r\n\t\tif (domainSplitted.length <= 2) {\r\n\t\t\t// first level domain\r\n\t\t\treturn fullDomain;\r\n\t\t} else {\r\n\t\t\t// Multi-level domain\r\n\t\t\tif (this.isNumber(domainSplitted[domainSplitted.length - 1])) {\r\n\t\t\t\t// last part is number, ip as hostname\r\n\t\t\t\treturn fullDomain;\r\n\t\t\t} else {\r\n\t\t\t\t// last is a word, hostname is a domain name\r\n\t\t\t\tlet rootDomain: string = \r\n\t\t\t\t\t\tdomainSplitted[domainSplitted.length - 2] +\r\n\t\t\t\t\t\t\".\" +\r\n\t\t\t\t\t\tdomainSplitted[domainSplitted.length - 1];\r\n\t\t\t\treturn rootDomain\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tupdatePending(flag: boolean): void {\r\n\t\tthis.displayPending = flag;\r\n\t}\r\n\r\n\tprivate isNumber(str: string): boolean {\r\n\t\treturn !isNaN(parseInt(str));\r\n\t}\r\n\r\n\tprivate resetFields(): void {\r\n\t\tthis.displayCredentialError = false;\r\n\t\tthis.displayError = false;\r\n\t\tthis.displayPending = false;\r\n\t\tthis.isLoading = false;\r\n\t\tthis.errorDetails = undefined;\r\n\t}\r\n\r\n}\r\n","<div class=\"login-content\">\r\n\t<div *ngIf=\"!displayPending\">\r\n\t\t<h1>Login:</h1>\r\n\t\t\t<div class=\"container\">\r\n\t\t\t\t<form (ngSubmit)=\"login()\">\r\n\t\t\t\t\t<div class=\"login-form\">\r\n\t\t\t\t\t\t\t<label for=\"username-input\">username</label>\r\n\t\t\t\t\t\t\t<input type=\"text\" class=\"login-input-text\" \r\n\t\t\t\t\t\t\t\t\tid=\"username\" name=\"username\" [(ngModel)]=\"userInput\" />\r\n\t\t\t\t\t\t\t<label for=\"password-input\">password</label>\r\n\t\t\t\t\t\t\t<input type=\"password\" class=\"login-input-text\" \r\n\t\t\t\t\t\t\t\t\tid=\"password\" name=\"password\" [(ngModel)]=\"pwdInput\" />\r\n\t\t\t\t\t\t\t<button type=\"submit\" class=\"login-btn\">\r\n\t\t\t\t\t\t\t\t<span *ngIf=\"!isLoading\">Login</span>\r\n\t\t\t\t\t\t\t\t<span><img *ngIf=\"isLoading\" src=\"assets/loading-login.gif\" height=\"21\"/></span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t<div *ngIf=\"displayCredentialError\" class=\"error-login\">\r\n\t\t\t<span>Login error, credentials are not valid</span>\r\n\t\t</div>\r\n\t\t<div *ngIf=\"displayError\" class=\"error-login\">\r\n\t\t\t<span>Backend server error!</span>\r\n\t\t\t<h2>{{ errorDetails }}</h2>\r\n\t\t</div>\r\n\t</div>\r\n\t<div *ngIf=\"displayPending\" class=\"error-login\">\r\n\t\t<app-login-pending [username]=\"userInput\" (pendingFlag)=\"updatePending($event)\"></app-login-pending>\r\n\t</div>\r\n</div>\r\n","import { Component, Input, OnInit, Output, EventEmitter} from '@angular/core';\nimport { Environment } from 'src/environments/environment';\nimport { RestService } from '../rest-service';\n\n@Component({\n  selector: 'app-login-pending',\n  templateUrl: './login-pending.component.html',\n  styleUrls: ['./login-pending.component.css']\n})\nexport class LoginPendingComponent implements OnInit{\n\n  private regUrl: string = Environment.getRegistrationHost + '/';\n\n  @Input()\n  username: string;\n  \n  @Output()\n  pendingFlag = new EventEmitter<boolean>();;\n\n  constructor(private rest: RestService) { }\n\n  ngOnInit(): void {\n      \n  }\n\n  resendToken(): void {\n    \n  }\n\n  back(): void {\n    this.pendingFlag.emit(false);\n  }\n\n}\n","<div class=\"container\">\n    <div class=\"header\">\n        <h1>Your account is in pending</h1>\n    </div>\n    <div class=\"editorial\">\n        <p>Hey! your account need to be actviated by the email sent to you in the registration step.</p>\n        <p>Please check your mail and click on the activation link.</p>\n        <p>Remember to check in the spam folder.</p>\n        <br/>\n        <p>Did you need a new mail? Click on resend mail.</p>\n        <button type=\"button\" class=\"login-btn\" (click)=\"resendToken()\">\n            <span>Resend mail</span>\n        </button>\n        <div class=\"space-10\"></div>\n        <button type=\"button\" class=\"login-btn\" (click)=\"back()\">\n            <span>Back</span>\n        </button>\n    </div>\n\n</div>\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders, HttpResponse } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class RestService {\r\n\r\n\tconstructor(private http: HttpClient) { }\r\n\r\n\tsendPostGetRawText(url: string, body: any, headers: HttpHeaders): Observable<HttpResponse<string>> {\r\n\t\t// call\r\n\t\treturn this.http.post(url, body, {\r\n\t\t\theaders,\r\n\t\t\tobserve: 'response',\r\n\t\t\tresponseType: 'text'\r\n\t\t});\r\n\t}\r\n\r\n\tsendPostWithString(url: string, body: string, headers: HttpHeaders): Observable<HttpResponse<any>> {\r\n\t\treturn this.http.post(url, body, {\r\n\t\t\theaders,\r\n\t\t\tobserve: 'response'\r\n\t\t})\r\n\t}\r\n\t\r\n\tsendPost<T>(url: string, body: any, headers: HttpHeaders): Observable<HttpResponse<T>> {\r\n\t\treturn this.http.post<T>(url, body, {\r\n\t\t\theaders,\r\n\t\t\tobserve: 'response',\r\n\t\t\tresponseType: 'json'\r\n\t\t});\r\n\t}\r\n\t\r\n\tsendGet<T>(url: string, headers: HttpHeaders): Observable<HttpResponse<T>> {\r\n\t\treturn this.http.get<T>(url, {\r\n\t\t\theaders,\r\n\t\t\tobserve: 'response'\r\n\t\t});\r\n\t}\r\n}\r\n","export class DefaultAvatar {\r\n    public static DEFAULT_AVATAR: string = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBoRXhpZgAATU0AKgAAAAgABAEa\" + \r\n            \"AAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAMAAAExAAIAAAARAAAATgAAAAAAAJOjAAAD6AAAk6MAAAPocGFpbnQu\" +\r\n            \"bmV0IDQuMy4xMQAA/9sAQwAGBAUGBQQGBgUGBwcGCAoQCgoJCQoUDg8MEBcUGBgXFBYWGh0lHxobIxwWFiAsICMmJykqKRkf\" +\r\n            \"LTAtKDAlKCko/9sAQwEHBwcKCAoTCgoTKBoWGigoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgo\" +\r\n            \"KCgoKCgo/8AAEQgBAAEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMF\" +\r\n            \"BQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElK\" +\r\n            \"U1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV\" +\r\n            \"1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQH\" +\r\n            \"BQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJ\" +\r\n            \"SlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT\" +\r\n            \"1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A6+iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA\" +\r\n            \"KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA\" +\r\n            \"KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKFBZgFBJJwAO9ABRW/p/hHV71Q32cW\" +\r\n            \"6EfenO39Ov6Vsw/D6YqPO1BEbuEiLD88igDh6K7ib4fTBT5OoI7dg8RUfnk1jah4R1eyUt9nFwgH3oDu/Tr+lAGBRQwKsQwI\" +\r\n            \"IOCDRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRVnTLGbUr6K0thmSQ4yeijuT7CgCx\" +\r\n            \"oWj3Os3nk2y4VeZJG+6g/wAfQf8A169R0Lw9Y6OgMEe+4xhpnGWP09B9P1q3o+m2+lWKWtquFXlm7u3dj71doAKKKKACiiig\" +\r\n            \"DH13w9Y6whM8ey4x8syDDD6+o9j+leXa7o9zo155NyMq3Mci/dcf4+o/+tXtNUtY02DVbF7W6XKtyrd0bsw96APEqKs6nYza\" +\r\n            \"bfS2lyMSRnGR0I7EexqtQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFei/DXTRHZzahIv7yY+XG\" +\r\n            \"f9gdfzP/AKDXnNe26FbfY9HsoCgRkiUMB/exz+uaAL1FFFABRRRQAUUUUAFFFFAHFfErTBJZw6hGvzwny5D/ALJ6H8D/AOhV\" +\r\n            \"51Xtmu232zRr2AIHZ4mCg/3scfrivEqAFooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAM45r3qvBa9\" +\r\n            \"s0K5+2aNZT7g7PCpYj+9jn9c0AXqKKKACiiigAooooAKKKKAA9K8FzmvbNdufsejXs+4IyQsVJ/vY4/XFeJ0AFFFFABRRRQA\" +\r\n            \"UUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABXonw11ISWc2nyN88R8yMHupPP5H/0KvO6s6ZfTadfQ3duf3kbZx2Y\" +\r\n            \"dwfqKAPcaKo6PqUGq2KXNs2Vbhlzyjdwfer1ABRRRQAUUUUAFFFUdY1ODSrF7m5YBV4Vc8u3YD3oA5f4l6kI7OHT4z88p8yQ\" +\r\n            \"DsoPH5n/ANBrzurOp302o3013cH95I2cdlHYD6Cq1ABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQA\" +\r\n            \"UUUUAaOh6vc6PeedbN8rcSRt91x7+/oa9Q0HxFY6xGBC4jucfNA5ww+nqPp+lePUA4ORwaAPeqK8j0/xbq9kAPtH2hB/DON3\" +\r\n            \"69f1rag+IMwUefp8bt3KSlR+RBoA9CoJwMnpXns/xBmK/uNPjRvV5Sw/IAVi6h4t1e9488QJx8sA29Pfr+tAHoeveIrHR42E\" +\r\n            \"rmS4x8sK9Sff0H+ea8v1zV7nWLzzrlsKvEcY+6g9vf1NZ3Uknkk5J9aKACikpaACiiigAooooAKKKKACiiigAooooAKKKKAC\" +\r\n            \"iiigAooooAKKKKACkpaKACikqSGGWeRY4I3kkboqKWJ/AUAMoroLHwfrF1gmBbdSMhpmx+gyR+Vbdt8PmKqbnUAD3WOPP6k/\" +\r\n            \"0oA4SivTE8BaYuN092x/31A/9BqyvgrRwMGKVvcyGgDyqivVD4J0g9EmH0kNV38BaYc7Z7tfT51I/wDQaAPM6K7u5+HzBWNt\" +\r\n            \"qAJ7LJHj9Qf6ViX3g/WLXJEC3CgZLQtn9Dgn8qAOfop80MsEjRzxvHIvVXUqR+BplABRRRQAUUUUAFFFFABRRRQAUUUUAFFF\" +\r\n            \"FABRRRQAUUUUAFFFFABVzTNMvNTm8qygaVh94jhV+p6Cuh8LeEJdQEd1qG6G0PzKnRpB/Qfz/WvR7O1gs7dYLWJYolGAqj/O\" +\r\n            \"T70Acho/gS3iCvqkpnfvHGSqD8ep/Suus7O2sovLtII4U9EXGfr61PRQAUUUUAFFFFABRRRQAUUUUAQXlnbXsXl3cEcyejrn\" +\r\n            \"H09K5HWPAkEoL6XKYH/55yEsh/HqP1rtaKAPEdT0y80ybyr2Boifuk8q30PQ1Tr3S8tYLy3aG6iWWJuCrDP+T715x4p8ISae\" +\r\n            \"JLrT901oPmZDy0Y/qP5frQByVFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABXb+B/DAnVNR1FMxHmGJh97/aI9PT1+nXF8\" +\r\n            \"H6N/bGqASjNrDh5ff0X8f5A166AAAAAAOgFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAeeeOPDAgV9R06PEQ5\" +\r\n            \"miUfd/2gPT19Pp04iveiAQQQCD1BryLxjo39j6piIYtZgXi9vVfw/kRQBhUUUUAFFFFABRRRQAUUUUAFFFFABRRU1nbm6vIL\" +\r\n            \"dSAZpFjBPbJxQB6r4I08WHh+3JA82cec5Hv0/TH61v0KAFAAwB0FFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUU\" +\r\n            \"AFYHjfTxf+H5yAPNgHnIT7df0z+lb9DAFSCMjuKAPBaKlvLc2t3PbsctE7Rk+uDioqACiiigAooooAKKKKACiiigAq9oH/Id\" +\r\n            \"03/r5i/9DFUavaB/yHtN/wCvmL/0MUAe2UUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAeJ6/8A8h7U\" +\r\n            \"v+vmX/0M1Rq/r/8AyHtS/wCvmX/0M1QoAKKKKACiiigAooooAKKKKACp7C4+yX1tc7d/kyrJtzjOCDjP4VBRQB3n/Cwj/wBA\" +\r\n            \"z/yY/wDsaP8AhYR/6Bn/AJMf/Y1wdFAHef8ACwj/ANAz/wAmP/saP+FhH/oGf+TH/wBjXB0UAd5/wsI/9Az/AMmP/saP+FhH\" +\r\n            \"/oGf+TH/ANjXB0UAd5/wsI/9Az/yY/8AsaP+FhH/AKBn/kx/9jXB0UAd5/wsI/8AQM/8mP8A7Gj/AIWEf+gZ/wCTH/2NcHRQ\" +\r\n            \"B3n/AAsI/wDQM/8AJj/7Gj/hYR/6Bn/kx/8AY1wdFAHef8LCP/QM/wDJj/7Gj/hYR/6Bn/kx/wDY1wdFAHef8LCP/QM/8mP/\" +\r\n            \"ALGj/hYR/wCgZ/5Mf/Y1wdFAHef8LCP/AEDP/Jj/AOxo/wCFhH/oGf8Akx/9jXB0UAd5/wALCP8A0DP/ACY/+xo/4WEf+gZ/\" +\r\n            \"5Mf/AGNcHRQBPf3H2u+ubnbs86VpNuc4yScZ/GoKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiig\" +\r\n            \"AooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiig\" +\r\n            \"AooooAKKKKACiiigAooooAKKKKACiiigD//Z\";\r\n}","export class JWT {\r\n\tiss: string;\r\n    upn: string;\r\n    groups: string[];\r\n    birthdate: string;\r\n    email: string;\r\n    name: string;\r\n    surname: string;\r\n    country: string;\r\n\tavatar: string;\r\n    iat: number;\r\n    exp: number;\r\n    jti: string;\r\n}","import { HttpHeaders, HttpResponse } from '@angular/common/http';\r\nimport { Component, OnInit, AfterViewInit } from '@angular/core';\r\nimport { firstValueFrom, Observable } from 'rxjs';\r\nimport { Environment } from 'src/environments/environment';\r\nimport { RestService } from '../rest-service';\r\nimport { JWT } from './jwt-decode-vo';\r\nimport { DefaultAvatar } from './default.avatar';\r\nimport { CookieService } from 'ngx-cookie-service';\r\n\r\n@Component({\r\n\tselector: 'app-toolbar',\r\n\ttemplateUrl: './toolbar.component.html',\r\n\tstyleUrls: ['./toolbar.component.css']\r\n})\r\nexport class ToolbarComponent implements OnInit, AfterViewInit {\r\n\t\r\n\tprivate validateUrl: string = Environment.getLoginHost() + \"/validate\";\r\n\r\n\thomeUrl: string = Environment.getHomeHost();\r\n\tloginUrl: string = Environment.getLoginHost();\r\n\tuserManagementUrl: string = Environment.getUserManagerHost();\r\n\tregistrationUrl: string = Environment.getRegistrationHost();\r\n\r\n\tjwt: JWT = new JWT();\r\n\tcookieJWT: string;\r\n\r\n\tDEFAULT_AVATAR : string = DefaultAvatar.DEFAULT_AVATAR;\r\n\r\n\tconstructor(private cookies: CookieService, private rest: RestService) {\r\n\t\tthis.cookieJWT = this.cookies.get('user.jwt');\r\n\t}\r\n\r\n\r\n\tngOnInit(): void {\r\n\r\n\t\tif (this.cookieJWT) {\r\n\t\t\t\r\n\t\t\t//JWT found, check if is valid\r\n\t\t\tconst obsv: Observable<HttpResponse<JWT>> = this.rest.sendPost<JWT>(this.validateUrl, this.cookieJWT, new HttpHeaders({\r\n\t\t\t\t'content-type': 'text/plain'\r\n\t\t\t}))\r\n\r\n\t\t\tfirstValueFrom(obsv)\r\n\t\t\t\t\t.then((resp) => {\r\n\t\t\t\t\t\t//JWT correct, move to Home Page\r\n\t\t\t\t\t\tthis.jwt = resp.body;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\t//JWT non correct or service not available\r\n\t\t\t\t\t\tif (error.status === 401) {\r\n\t\t\t\t\t\t\tconsole.error('The token JWT is not valid, relogin required', error)\r\n\t\t\t\t\t\t\tthis.logout();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.error('The call is not end correct', error)\r\n\t\t\t\t\t\t\tthis.jwt = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tngAfterViewInit(): void {\r\n\t\tlet prevScrollpos = window.pageYOffset;\r\n\t\twindow.onscroll = function() {\r\n\t\t\tvar currentScrollPos = window.pageYOffset;\r\n\t\t\tif (prevScrollpos > currentScrollPos) {\r\n\t\t\t\tdocument.getElementById(\"navbar\").style.top = \"0\";\r\n\t\t\t} else {\r\n\t\t\t\tdocument.getElementById(\"navbar\").style.top = \"-80px\";\r\n\t\t\t}\r\n\t\t\tprevScrollpos = currentScrollPos;\r\n\t\t}\r\n\t}\r\n\t\r\n\tlogout(): void {\r\n\t\tthis.cookies.delete('user.jwt');\r\n\t\twindow.top.location.href = this.homeUrl;\r\n\t}\r\n\r\n}\r\n","<header class=\"u-clearfix header\" id=\"navbar\">\n\t<div class=\"container\">\n\t\t<nav>\n\t\t\t<div class=\"logo\"><a [href]=\"homeUrl\"><span>LOGO</span></a></div>\n\t\t\t\n\t\t\t<div *ngIf=\"!cookieJWT\" class=\"login\">\n\t\t\t\t<a [href]=\"loginUrl\"><span>LOGIN</span></a>\n\t\t\t\t<span> - </span>\n\t\t\t\t<a [href]=\"registrationUrl\"><span>REGISTRATION</span></a>\n\t\t\t</div>\n\t\t\t<div *ngIf=\"cookieJWT\" class=\"logged\">\n\t\t\t\t<div class=\"user-mngmnt\">\n\t\t\t\t\t<a [href]=\"userManagementUrl\">Edit user</a>\n\t\t\t\t\t<a [href]=\"homeUrl\" (click)=\"logout()\">Logout</a>\n\t\t\t\t</div>\n\t\t\t\t<img [src]=\"jwt.avatar\" [alt]=\"jwt.name\" *ngIf=\"jwt.avatar\" />\n\t\t\t\t<img [src]=\"DEFAULT_AVATAR\" [alt]=\"jwt.name\" *ngIf=\"!jwt.avatar\" />\n\t\t\t</div>\n\t\t</nav>\n\t</div>\n</header>\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nimport { Injectable } from '@angular/core';\n\nexport const environment = {\n  production: false\n};\n\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class Environment {\n\t\n\tprivate constructor() { }\n\t\n\tpublic static getHomeHost(): string {\n\t\treturn 'http://localhost:8080';\n\t}\n\t\n\tpublic static getHotelHost(): string {\n\t\treturn 'http://localhost:8081';\n\t}\n\t\n\tpublic static getLoginHost(): string {\n\t\treturn 'http://localhost:7070';\n\t}\n\n\tpublic static getRegistrationHost(): string {\n\t\treturn 'http://localhost:7171';\n\t}\n\t\n\tpublic static getUserManagerHost(): string {\n\t\treturn \"http://localhost:7071\";\n\t}\n\t\n}","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"],"names":[],"sourceRoot":"webpack:///"}